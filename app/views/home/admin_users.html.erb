<% provide :title, 'Add/Edit Users' %>

<h1><%= yield :title %></h1>
<div class="mb-4 form-group">
  <p style="color: #ee0000">* Required</p>
  <h2>Add a new user</h2>
  <%= form_with(url: user_insert_path, local: true) do |form| %>

    <%= form.label(:user_role, 'User role:') %> <span style="color: #ee0000"> * </span>
    <%= form.select(:user_role, options_for_select(User::ROLES), { include_blank: true }, { required: true, class: 'form-select' }) %>

    <%= form.label(:user_name, 'User name:') %><span style="color: #ee0000"> * </span>
    <%= form.text_field :user_name, placeholder: 'John Smith', required: true %>

    <%= form.label(:uid, 'User ID:') %><span style="color: #ee0000"> * </span>
    <%= form.text_field :uid, placeholder: 'UID', required: true %>

    <div>
      <div class="btn-group" role="group">
        <input type="submit" name="commit" value="Add user" class="btn btn-primary">
      </div>
    </div>
  <% end %>
</div>

<h2>Active Users</h2>
<table class="table mt-5">
  <!-- the header row -->
  <thead class="thead-light">
  <tr>
    <th scope="col">Actions</th>
    <th scope="col">UID</th>
    <th scope="col">User name</th>
    <th scope="col">User role</th>
  </tr>
  </thead>
  <!-- Layout all those beautiful requests -->
  <tbody>
  <% @active_users.each do |user| %>
    <tr>
      <td>
        <%= link_to 'Deactivate', toggle_user_status_path(user) %>
        <%= link_to 'Edit', edit_user_path(user.id) %>
      </td>
      <td><%= user.uid %></td>
      <td><%= user.user_name %></td>
      <td><%= user.user_role %>
    </tr>
  <% end %>
  </tbody>
</table>

<h2>Deactivated Users</h2>
<table class="table mt-5">
  <!-- the header row -->
  <thead class="thead-light">
  <tr>
    <th scope="col">Actions</th>
    <th scope="col">UID</th>
    <th scope="col">User name</th>
    <th scope="col">User role</th>
  </tr>
  </thead>
  <tbody>
  <% @inactive_users.each do |user| %>
    <tr>
      <td>
        <%= link_to 'Activate', toggle_user_status_path(user) %>
        <%= link_to 'Edit', edit_user_path(user.id) %>
      </td>
      <td><%= user.uid %></td>
      <td><%= user.user_name %></td>
      <td><%= user.user_role %>
    </tr>
  <% end %>
  </tbody>
</table>
